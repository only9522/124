(function(){"use strict";var t={8286:function(t,e,r){var i=r(144),n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"app"}},[r("router-view"),r("Footer")],1)},s=[],a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"footer-container"},[r("RouterLink",{staticClass:"item item1",attrs:{to:{name:"Home"}}}),r("RouterLink",{staticClass:"item item2",attrs:{to:{name:"Rotation"}}}),r("RouterLink",{staticClass:"item item3",attrs:{to:{name:"Pleasantly"}}}),r("RouterLink",{staticClass:"item item4",attrs:{to:{name:"Card"}}}),r("RouterLink",{staticClass:"item item5",attrs:{to:{name:"Login"}}})],1)},o=[],l={name:"Footer"},c=l,u=r(1001),d=(0,u.Z)(c,a,o,!1,null,"7aada58b",null),h=d.exports,m={components:{Footer:h}},p=m,f=(0,u.Z)(p,n,s,!1,null,null,null),v=f.exports,g=r(8345),w=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{ref:"container",staticClass:"home-container"},[r("Header",{on:{search:t.handleSearch}}),r("ul",{staticClass:"product-info"},t._l(t.list.products,(function(e){return r("li",{key:e.id},[r("div",{staticClass:"desc"},[r("RouterLink",{attrs:{to:{name:"Detail",params:{id:e._id}}}},[r("h3",{staticClass:"title"},[t._v(t._s(e.name))])]),r("p",{staticClass:"itDesc"},[t._v(t._s(e.descriptions||t.setPrice(e.price)))])],1),r("div",{staticClass:"imageInfo"},[r("RouterLink",{attrs:{to:{name:"Detail",params:{id:e._id}}}},[r("img",{attrs:{src:e.coverImg}})])],1)])})),0)],1)},_=[],y=r(9669),P=r.n(y);const C=P().create({baseURL:"http://www.lanlianhua.work:3009"});C.interceptors.response.use((function(t){return t.data}));var A=C;async function x(t=10,e=1,r,i){return await A.get("/api/v1/products",{params:{per:t,page:e,name:r,product_category:i}})}var b=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"header-container"},[t._m(0),r("form",{staticClass:"item center",on:{submit:function(e){return e.preventDefault(),t.handleSubmit.apply(null,arguments)}}},[r("div",{staticClass:"form-item"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.searchProduct,expression:"searchProduct"}],attrs:{type:"text",placeholder:"请输入想要的商品"},domProps:{value:t.searchProduct},on:{input:function(e){e.target.composing||(t.searchProduct=e.target.value)}}})])]),r("div",{staticClass:"item right"},[r("RouterLink",{attrs:{to:{name:"Login"}}},[t._v("登录")])],1)])},U=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"item left"},[i("img",{attrs:{src:r(1374),alt:""}})])}],$={data(){return{searchProduct:""}},methods:{handleSubmit(){this.searchProduct=this.searchProduct.replaceAll(" ",""),this.searchProduct.length<=0||this.$emit("search",this.searchProduct)}}},k=$,E=(0,u.Z)(k,b,U,!1,null,"eb20ad5a",null),S=E.exports,L=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div")},I=[],R={props:{}},N=R,O=(0,u.Z)(N,L,I,!1,null,"667c719b",null),Z=O.exports;function D(t){return t=+t,"￥"+t.toFixed(2)}var T={components:{Header:S,ProductList:Z},data(){return{list:{},page:1,limit:10}},methods:{setPrice:D,async handleScroll(){const t=this.$refs.container.scrollHeight,e=1e3;if(t-this.$refs.container.scrollTop<=e&&this.page<this.list.pages){this.page++;const t=await x(this.limit,this.page);this.list.products=this.list.products.concat(t.products)}},async handleSearch(t){this.list=await x(this.limit,1,t)}},async created(){this.list=await x(this.limit,this.page)},mounted(){this.$refs.container.addEventListener("scroll",this.handleScroll)},beforeDestroy(){this.$refs.container.removeEventListener("scroll",this.handleScroll)}},j=T,H=(0,u.Z)(j,w,_,!1,null,"7cdf0608",null),B=H.exports,F=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("form",{on:{submit:function(e){return e.preventDefault(),t.handleSubmit.apply(null,arguments)}}},[r("div",{staticClass:"form-item"},[r("label",[r("span",[t._v("账号:")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.loginUser,expression:"loginUser"}],attrs:{type:"text",placeholder:"请输入账号"},domProps:{value:t.loginUser},on:{input:function(e){e.target.composing||(t.loginUser=e.target.value)}}})]),r("p",{staticClass:"err"},[t._v(t._s(t.error.userName))])]),r("div",{staticClass:"form-item"},[r("label",[r("span",[t._v("密码:")]),r("input",{directives:[{name:"model",rawName:"v-model",value:t.loginPwd,expression:"loginPwd"}],attrs:{type:"password",placeholder:"请输入密码"},domProps:{value:t.loginPwd},on:{input:function(e){e.target.composing||(t.loginPwd=e.target.value)}}})]),r("p",{staticClass:"err"},[t._v(t._s(t.error.userPwd))])]),t._m(0),r("div",{staticClass:"register"},[t._v(" 还没有账号?快去 "),r("RouterLink",{attrs:{to:{name:"Register"}}},[t._v("注册")]),t._v(" 吧 ")],1)])},M=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"form-item"},[r("button",[t._v("登录")])])}];async function K(t,e){return await A.post("/api/v1/auth/reg",{userName:t,password:e})}async function W(t,e){return await A.post("/api/v1/auth/login",{params:{userName:t,password:e}})}var G={data(){return{loginUser:"",loginPwd:"",error:{userName:"",userPwd:""}}},methods:{async handleSubmit(){this.loginUser=this.loginUser.replaceAll(" ",""),this.loginPwd=this.loginPwd.replaceAll(" ","");const t=/[\u4e00-\u9fa5]/;if(t.test(this.loginUser))return void(this.error.userName="账号不能包含汉字");if(t.test(this.loginPwd))return void(this.error.userPwd="密码不能包含汉字");if(this.loginUser.length<6||this.loginUser.length>10)return void(this.error.userName="账号长度为6-10位");if(this.loginPwd.length<6||this.loginPwd.length>16)return void(this.error.userPwd="密码的长度为6-16位");this.error.userName=this.error.userPwd="";const e=await W(this.loginUser,this.loginPwd);console.log(e),"error"!==e.code?this.$router.push("/"):alert(e.message)}}},V=G,Y=(0,u.Z)(V,F,M,!1,null,"4f40c04d",null),q=Y.exports,J=function(){var t=this,e=t.$createElement,r=t._self._c||e;return t.data?r("div",{staticClass:"detail-container"},[r("div",{staticClass:"list-content",domProps:{innerHTML:t._s(t.data.content)}})]):t._e()},z=[];async function Q(t){return await A.get(`/api/v1/products/${t}`)}var X={data(){return{data:null}},async created(){this.data=await Q(this.$route.params.id)}},tt=X,et=(0,u.Z)(tt,J,z,!1,null,"02e36468",null),rt=et.exports,it=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("form",{staticClass:"register-container",on:{submit:function(e){return e.preventDefault(),t.handleSubmit.apply(null,arguments)}}},[r("div",{staticClass:"form-item"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.loginUser,expression:"loginUser"}],attrs:{type:"text",placeholder:"请输入您的账号"},domProps:{value:t.loginUser},on:{input:function(e){e.target.composing||(t.loginUser=e.target.value)}}}),r("p",{staticClass:"err"},[t._v(t._s(t.error.userName))])]),r("div",{staticClass:"form-item"},[r("input",{directives:[{name:"model",rawName:"v-model",value:t.loginPwd,expression:"loginPwd"}],ref:"inp",attrs:{type:"password",placeholder:"请输您的入密码"},domProps:{value:t.loginPwd},on:{input:function(e){e.target.composing||(t.loginPwd=e.target.value)}}}),t.showEye?r("span",{staticClass:"show",on:{click:t.handleClick}}):r("span",{staticClass:"hide",on:{click:t.handleClick}}),r("p",{staticClass:"err"},[t._v(t._s(t.error.userPwd))])]),t._m(0)])},nt=[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"form-item"},[r("button",[t._v("注册")])])}],st={data(){return{showEye:!1,loginUser:"",loginPwd:"",error:{userName:"",userPwd:""}}},methods:{handleClick(){this.showEye=!this.showEye,this.showEye?this.$refs.inp.type="text":this.$refs.inp.type="password"},async handleSubmit(){this.loginUser=this.loginUser.replaceAll(" ",""),this.loginPwd=this.loginPwd.replaceAll(" ","");const t=/[\u4e00-\u9fa5]/;if(t.test(this.loginUser))return void(this.error.userName="账号不能包含汉字");if(t.test(this.loginPwd))return void(this.error.userPwd="密码不能包含汉字");if(this.loginUser.length<6||this.loginUser.length>10)return void(this.error.userName="账号长度为6-10位");if(this.loginPwd.length<6||this.loginPwd.length>16)return void(this.error.userPwd="密码的长度为6-16位");this.error.userName=this.error.userPwd="";const e=await K(this.loginUser,this.loginPwd);console.log(e),"success"===e.code?(alert("注册成功"),this.$router.push("/login")):alert(e.message)}}},at=st,ot=(0,u.Z)(at,it,nt,!1,null,"68d2249b",null),lt=ot.exports,ct=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{ref:"container",staticClass:"rotation-container",on:{mouseover:t.stop,mouseleave:t.autoPlay}},[r("div",{staticClass:"carousel"},[r("ul",{staticClass:"carousel-img",style:{marginLeft:t.marginLeft,width:t.width}},t._l(t.list,(function(t){return r("li",{key:t.id},[r("CarouselImg",{attrs:{url:t.coverImg}})],1)})),0),r("div",{staticClass:"btn leftBtn",on:{click:function(e){return t.changeIndex(t.index-1)}}},[t._v("<")]),r("div",{staticClass:"btn rightBtn",on:{click:function(e){return t.changeIndex(t.index+1)}}},[t._v(">")]),r("ul",{staticClass:"dots"},t._l(t.list,(function(e,i){return r("li",{key:e.id,class:{active:t.index===i},on:{click:function(e){return t.changeIndex(i)}}})})),0)]),r("ul",{staticClass:"products"},t._l(t.list,(function(t){return r("li",{key:t.id},[r("div",[r("img",{attrs:{src:t.coverImg,alt:""}})])])})),0)])},ut=[],dt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"carousel-img-container"},[r("img",{attrs:{src:t.url}})])},ht=[],mt={props:{url:{type:String,required:!0}}},pt=mt,ft=(0,u.Z)(pt,dt,ht,!1,null,"11bb2e01",null),vt=ft.exports,gt={data(){return{list:[],index:0,containerWidth:0,timerId:null}},components:{CarouselImg:vt},computed:{marginLeft(){return-this.index*this.containerWidth+"px"},width(){return this.list.length*this.containerWidth+"px"}},methods:{setPrice:D,changeIndex(t){t<0&&(t=this.list.length-1),t>=this.list.length&&(t=0),this.index=t},autoPlay(){this.timerId=setInterval((()=>{this.changeIndex(this.index+1)}),1e3)},stop(){clearInterval(this.timerId),this.timerId=null}},async created(){const t=await x();this.list=t.products,console.log(this.list)},mounted(){this.containerWidth=this.$refs.container.clientWidth,this.autoPlay()},destroyed(){this.stop()}},wt=gt,_t=(0,u.Z)(wt,ct,ut,!1,null,"31def47d",null),yt=_t.exports,Pt=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{ref:"container",staticClass:"card-container"},t._l(t.list,(function(t){return r("van-card",{key:t.id,attrs:{price:t.price,desc:t.desc,title:t.name,thumb:t.coverImg}})})),1)},Ct=[],At={data(){return{list:[],page:1,limit:10}},async created(){const t=await x(this.limit,this.page);this.list=t.products},methods:{async handleScroll(){const t=900,e=this.$refs.container.scrollHeight-this.$refs.container.scrollTop;if(e<=t){this.page++;const t=await x(this.limit,this.page);this.list=this.list.concat(t.products)}}},mounted(){console.log(this.$refs.container),this.$refs.container.addEventListener("scroll",this.handleScroll)},beforeDestroy(){this.$refs.container.removeEventListener("scroll",this.handleScroll)}},xt=At,bt=(0,u.Z)(xt,Pt,Ct,!1,null,"ab360572",null),Ut=bt.exports,$t=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"pleasantly-container"},[t._l(2,(function(t){return r("van-grid",{key:t},[r("van-grid-item",{attrs:{icon:"photo-o",text:"文字"}}),r("van-grid-item",{attrs:{icon:"photo-o",text:"文字"}}),r("van-grid-item",{attrs:{icon:"photo-o",text:"文字"}}),r("van-grid-item",{attrs:{icon:"photo-o",text:"文字"}})],1)})),r("van-steps",{attrs:{active:t.active}},[r("van-step",[t._v("买家下单")]),r("van-step",[t._v("商家接单")]),r("van-step",[t._v("买家提货")]),r("van-step",[t._v("交易完成")])],1)],2)},kt=[],Et={data(){return{active:1}}},St=Et,Lt=(0,u.Z)(St,$t,kt,!1,null,"54961642",null),It=Lt.exports;i["default"].use(g.Z);const Rt=[{name:"Home",path:"/",component:B},{name:"Login",path:"/login",component:q},{name:"Detail",path:"/detail/:id",component:rt},{name:"Register",path:"/register",component:lt},{name:"Rotation",path:"/rotation",component:yt},{name:"Card",path:"/card",component:Ut},{name:"Pleasantly",path:"/pleasantly",component:It}],Nt=new g.Z({mode:"history",base:"/",routes:Rt});var Ot=Nt,Zt=r(629);i["default"].use(Zt.ZP);var Dt=new Zt.ZP.Store({state:{},getters:{},mutations:{},actions:{},modules:{}}),Tt=r(4720),jt=r.n(Tt),Ht=r(3266);r(415);i["default"].use(Ht.ZP),i["default"].use(jt()),new i["default"]({router:Ot,store:Dt,render:t=>t(v)}).$mount("#app")},1374:function(t){t.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAgAgMAAAAdw9KTAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAMUExURUdwTP///////////waf0AoAAAADdFJOUwDjSYAlncUAAAAbSURBVBjTY5j/Hwq+MdTDmH+RmUgK6AuGhcsAU5tyB6Ji+x0AAAAASUVORK5CYII="}},e={};function r(i){var n=e[i];if(void 0!==n)return n.exports;var s=e[i]={exports:{}};return t[i](s,s.exports,r),s.exports}r.m=t,function(){var t=[];r.O=function(e,i,n,s){if(!i){var a=1/0;for(u=0;u<t.length;u++){i=t[u][0],n=t[u][1],s=t[u][2];for(var o=!0,l=0;l<i.length;l++)(!1&s||a>=s)&&Object.keys(r.O).every((function(t){return r.O[t](i[l])}))?i.splice(l--,1):(o=!1,s<a&&(a=s));if(o){t.splice(u--,1);var c=n();void 0!==c&&(e=c)}}return e}s=s||0;for(var u=t.length;u>0&&t[u-1][2]>s;u--)t[u]=t[u-1];t[u]=[i,n,s]}}(),function(){r.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(e,{a:e}),e}}(),function(){r.d=function(t,e){for(var i in e)r.o(e,i)&&!r.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})}}(),function(){r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){r.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){var t={143:0};r.O.j=function(e){return 0===t[e]};var e=function(e,i){var n,s,a=i[0],o=i[1],l=i[2],c=0;if(a.some((function(e){return 0!==t[e]}))){for(n in o)r.o(o,n)&&(r.m[n]=o[n]);if(l)var u=l(r)}for(e&&e(i);c<a.length;c++)s=a[c],r.o(t,s)&&t[s]&&t[s][0](),t[s]=0;return r.O(u)},i=self["webpackChunkmy_cart"]=self["webpackChunkmy_cart"]||[];i.forEach(e.bind(null,0)),i.push=e.bind(null,i.push.bind(i))}();var i=r.O(void 0,[998],(function(){return r(8286)}));i=r.O(i)})();
//# sourceMappingURL=app.95cac60d.js.map